- name: configure worker
  hosts: all
  strategy: debug
#  connection: ssh
  tasks:
#     - name: set timezone to Europe/Kiev
#       timezone:
#         name: Europe/Kiev
     - name: Update all packages to their latest version
       become: True
       apt:
         name: "*"
         state: latest
         update_cache: yes
     - name: Install a list of packages
       apt:
         pkg:
         - mc
         - htop
         - qemu-guest-agent
         - docker
         - docker-compose
         state: latest
     - name: set timezone
       command: sudo timedatectl set-timezone Europe/Kiev
       become: True
#     - name: Install docker
#       apt:
#         name: docker
#         state: present
#     - name: Install docker-compose
#       apt:
#         name: docker-compose
#         state: present
     - name: Ensure group "docker" exists
       group:
         name: docker
         state: present
     - name: Add the user mkorneyc to docker group
       user:
         name: mkorneyc
         groups: docker
         append: yes
#     - name: Update usergroup settings
#       command: newgrp docker
#    - name: groupadd docker
#      command: groupadd docker
#      ignore_errors: True
#      become: True
#      become-method: sudo
#      register: mymotd
#    - name: usermod -aG docker $USER
#      command: sudo usermod -aG docker mkorneyc
#      command: sudo usermod -aG docker $USER
#      command: sudo ls -la
#      sudo: True
#      ignore_errors: True
#      become: True
#      register: mymotd
#      ignore_errors: True
      
      
#      register: mymotd
#    - name: Hello Message
#      debug:
#        msg: "Hello World!"
#    - name: return motd to registered var
#      command: cat /etc/mc/sfs.ini
#      register: mymotd
#    - name: return value
#      debug:
#        msg: "The password is {{ mymotd }}"

